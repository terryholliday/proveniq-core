export const meta = {
    title: "Proveniq Core: Operator's Manual",
    version: "v2.2 (Enterprise)",
    classification: "OFFICIAL"
};

# Proveniq Core: Operator's Manual

## Sect. 01: System Architecture

Proveniq Core is a deterministic system of record for physical asset verification. Unlike probabilistic systems (AI) or subjective systems (Human Experts), Core relies on **Policy Logic**.

### 1.1 The Ledger Topology
The Ledger is an **Event Sourced** immutable log.
- **State Reduction**: `CurrentState = reduce(Events, apply)`
- **Schema Validation**: All events are validated against rigorous JSON-LD schemas before ingestion.
- **Merkle Compatibility**: Event hashes are designed to be anchored to public chains (via TrueManifest capability).

---

## Sect. 02: Statistical Definitions

### 2.1 Error Rates
Core is tuned to minimize **False Positives** (Type I Errors) at the expense of higher **False Negatives** (Type II Errors).
- **Insurer Policy**: Optimization Goal = `Recall`. We prefer to reject a valid asset than verify a fraudulent one.
- **Marketplace Policy**: Optimization Goal = `Precision`. We balance throughput with acceptable risk disclosure.

### 2.2 Decision Vectors
| State | Mathematical Definition | Action Required |
| :--- | :--- | :--- |
| **VERIFIED** | $\forall c \in Criteria, score(c) \ge threshold(c)$ | None. Asset is liquid. |
| **VERIFIED_WITH_DISCLOSURE** | $\exists c : threshold(c) > score(c) \ge min\_safe(c)$ | Buyer must acknowledge disclosure. |
| **REVIEW_REQUIRED** | $score(identity) \in [0.7, 0.9)$ (Ambiguous Zone) | Human intervention required. |
| **REJECTED** | $score(fraud) > max\_risk\_tolerance$ | Asset is frozen. Law enforcement API triggered. |

---

## Sect. 03: Integration Standards

### 3.1 Authentication & Idempotency
All API requests must be signed with a `P-Key` (Partner Key).
```bash
x-proveniq-key: pk_live_550e8400-e29b
x-idempotency-key: <uuid-v4>
```
Core guarantees **Exactly-Once Processing** if an idempotency key is provided.

### 3.2 Webhook SLAs
- **Event Delivery**: P99 < 200ms
- **Retry Policy**: Exponential Backoff (max 72 hours).
- **Signature Verification**: HMAC-SHA256 signature included in `x-proveniq-signature`.

---

## Sect. 04: Emergency Procedures (Defcon)

### 4.1 Dead Man Switch
If the Core Scoring Node goes offline, the **Dead Man Switch** activates.
- All pending transactions enter `HOLD` state.
- Secondary verifying nodes (Lender Nodes) are polled.

### 4.2 Revocation Propagation
If a trusted Issuer (class: `Authority`) issues a `STOLEN` report:
1. Core issues a `REVOKED` event ($t=0$).
2. Webhooks fire ($t+100ms$).
3. Partners must delist asset ($t+500ms$ required by SLA).

---

*Verified by Proveniq Architect [SYSTEM]*
